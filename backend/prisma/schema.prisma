

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// 1. User Model: For both regular users and human experts
model User {
  id        String   @id @default(uuid())
  email     String   @unique
  password  String
  role      Role     @default(USER) // Defines if they are a regular user or a Human Expert
  uploads   Media[]
  createdAt DateTime @default(now())
}

// 2. Media Model: Stores info about the uploaded video/image
model Media {
  id             String   @id @default(uuid())
  originalName   String   // The original name of the file (e.g., "my_video.mp4")
  filename       String   // The name saved on your Linux VM (e.g., "1735678.mp4")
  filePath       String   // The local path on your server
  status         Status   @default(PENDING) 
  
  // AI Results
  aiScore        Float?   // 0.0 to 1.0 (e.g., 0.95 means 95% chance it's a fake)
  
  // Human Review System
  expertVerdict  Boolean? // Final decision (True = Real, False = Fake)
  expertComments String?  // Explanation from the Farzana Tabassum (supervisor) or expert
  reviewedById   String?  // ID of the expert who reviewed it

  userId         String
  user           User     @relation(fields: [userId], references: [id])
  createdAt      DateTime @default(now())
}

// Enums make the code cleaner and prevent typos
enum Role {
  USER
  EXPERT
}

enum Status {
  PENDING      // Uploaded but not yet sent to AI
  PROCESSING   // AI is currently analyzing frames
  COMPLETED    // AI is done
  FAILED       // Error in processing
}